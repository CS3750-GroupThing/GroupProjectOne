<!DOCTYPE html>
<html>
<head>
<style>
hel {
	font-size: 2.5em; /* 40px/16=2.5em */
}

her {
	font-size: 2.5em; /* 40px/16=2.5em */
	position: absolute;
	right: 10px;

}


a {
  color: black;
  text-decoration: none; /* no underline */
}

</style>
<title>Todo list</title>
</head>
<body>

<hel>Todo List</hel>&nbsp;<her><a id="addLink" href="#" onclick="addTodo();">&#x2710;</a></her>
<hr/>
<table id="todoTable">

</table>
<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
<script type="text/javascript" charset="utf-8">
	/* Generic list to use in place of database query */
	/* Table setup (3 values)...  indexNumber, complete?(0/1), Description */
	var todoList = [];
	todoList.push(["0", 0, "Clean dishes"]);
	todoList.push(["1", 1, "Take out garbage"]);
	todoList.push(["2", 0, "Brush teeth"]);

	drawTable();
	function clearTable()
	{
		var tableHeaderRowCount = 0;
		var table = document.getElementById('todoTable');
		var rowCount = table.rows.length;
		for (var i = tableHeaderRowCount; i < rowCount; i++) {
		    table.deleteRow(tableHeaderRowCount);
		}
	}
	function completeTodo(todoID)
	{
		alert("Marking ID: " + todoID + " as Complete");
		/* var Query = "UPDATE todo SET complete=1 WHERE todoID=" + todoID;*/
		drawTable();
	}
	function uncompleteTodo(todoID)
	{
		alert("Marking ID: " + todoID + " as not complete");
		/* var Query = "UPDATE todo SET complete=1 WHERE todoID=" + todoID;*/
		drawTable();
	}

	function removeTodo(todoID)
	{
		/*alert("Removing ID: " + todoID);*/
		if (confirm('Remove this task?')) {
			// Yes
			/* var Query = "DELETE FROM todo WHERE todoID=todoID;*/
			drawTable();
		} else {
			// Do nothing!
		}
	}

	function addTodo()
	{
		var todoDesc = prompt("What do you need to do?");
		if (todoDesc != null) {
			var addItem = new Array();
			addItem[0] = Math.floor((Math.random() * 1000) + 1);
			addItem[1] = 0;	/* 0 = Not complete */
			addItem[2] = todoDesc;
			todoList.push(addItem);
			drawTable();
			/* Insert into DB */
			/*INSERT INTO  `W00353910`.`todo_Items` (`id` ,`owner` ,`completed` ,`description` VALUES (NULL ,  'AaronL',  '0',  'Mow the lawn');*/
		}
	}

	/* Draw the initial table with the existing todo values */
	function drawTable()
	{
		clearTable();
		/* INSERT database query here for all rows */
		/* var Query = "SELECT * FROM `todo_Items` WHERE OWNER=="AaronL";*/
		for (index = 0; index < todoList.length; index++) {
			var table = document.getElementById("todoTable");
			table.style.width = '100%';
			var header = table.createTHead();
			var row = header.insertRow(0);
			var todoID = todoList[index][0];
			var todoComplete = todoList[index][1];
			var todoDesc = todoList[index][2];
			var cell0 = row.insertCell(0);
			var cell1 = row.insertCell(1);
			var cell2 = row.insertCell(2);
			cell0.style.borderBottom = "thin solid #d3d3d3";
			cell1.style.borderBottom = "thin solid #d3d3d3";
			cell2.style.borderBottom = "thin solid #d3d3d3";
			cell0.innerHTML = todoDesc;
			cell0.style.fontSize = "22px";
			if (todoComplete == 1)
			{
				cell0.style.setProperty("text-decoration", "line-through");
				cell0.style.setProperty("color", "green");
				/*cell1.style.setProperty("text-decoration", "line-through");*/
				cell1.innerHTML = "<a href='javascript:void(0)' onclick='uncompleteTodo(" + todoID + ")'><img src='img\\undo_icon.png'></a>";
				/*cell1.innerHTML = "<a href='javascript:void(0)' onclick='uncompleteTodo(" + todoID + ")'>&#x27b0;</a>";*/
			} else {
				cell1.innerHTML = "<a href='javascript:void(0)' onclick='completeTodo(" + todoID + ")'><img src='img\\checkmark_icon.png'></a>";
				/*cell1.innerHTML = "<a href='javascript:void(0)' onclick='completeTodo(" + todoID + ")'>&#x2713;</a>";*/
				cell0.style.setProperty("color", "red");
			}

			cell0.style.width = '100%';
			/*cell1.innerHTML = "<a href=\"#\" onclick=\"completeTodo(); return false;\">&#x2713;</a>";*/
			cell1.style.fontSize = "28px";
			cell1.style.width = "50px";
			cell2.innerHTML = "<a href='javascript:void(0)' onclick='removeTodo(" + todoID + ")'><img src='img\\trash_icon.png'></a>";
			/*cell2.innerHTML = "<a href='javascript:void(0)' onclick='completeTodo(" + todoID + ")'>&#x2702;</a>";*/
			cell2.style.fontSize = "28px";
			cell2.style.width = "50px";
		}
	}

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "todo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    // Populate the database 
    //
    function populateDB(tx) {
         tx.executeSql('DROP TABLE IF EXISTS todo_Users');
         tx.executeSql('DROP TABLE IF EXISTS todo_Items');
         tx.executeSql('CREATE TABLE IF NOT EXISTS todo_Users (username NOT NULL, password NOT NULL)');
         tx.executeSql('CREATE TABLE IF NOT EXISTS todo_Items (id NOT NULL AUTO_INCREMENT,owner NOT NULL, completed NOT NULL, description NOT NULL)');
         tx.executeSql('INSERT INTO todo_Users (username, password) VALUES ("Aaron", "1234")');
    }

    // Transaction error callback
    //
    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    }

    </script>

</body>
</html> 