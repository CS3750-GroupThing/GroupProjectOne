<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="js/phonegap.js"></script>
<script src="js/sha512.js"></script>
<style>
hel {
	font-size: 2.5em; /* 40px/16=2.5em */
}

her {
	font-size: 2.5em; /* 40px/16=2.5em */
	position: absolute;
	right: 10px;

}

</style>

<script type="text/javascript">

function check()/*function to check username & password*/
{
 /*checkes whether the entered userid and password are matching*/
	var pass = document.getElementById('password');
	var user = document.getElementById('username');
	var hash = SHA512(pass);
	
	
	function getUser()
	{
		$.post( "http://scottschollmeyer.info/CS3750/assign2/userData.php",
		{
		username : user,
		password: hash,
		action: "get"
		},
		function( data, status) {
			if(data.toUpperCase == "SUCCESS")
			{
				window.location.replace("index.html");
			}
			else if(data.toUpperCase == "FAILURE")
			{
				alert("Username or Password Incorrect");
			}
		});
		
	}
	
	pass = null;
	user = null;
	hash = null;
	
	document.getElementsByName("password").value = "";
	document.getElementsByName("username").value = "";
	
	//javascript
	/*
	$.get("http://icarus.cs.weber.edu/~al53910/db.php",
	{username: "" + user + "", password: "" + hash + ""} )
	.done(function(data)
	{
		alert("Data: " + data);
		});
	});
	*/
	//end 
	
	
	/*
	var db = window.openDatabase("Database", "1.0", "todo", 200000);
	verifyPassword(user, hash);
	
	function error(tx, err) 
	{
		console.log("SQL tx Error: " + err);
	}
	
	function verifyPassword(user, hash)
	{		
		db.transaction( function(tx){ verifyWithDB(user, hash) }, error);
	}
	
	function verifyWithDB(user, hash) 
	{
		console.log("COUNT (password) FROM todo_Users WHERE username ='" + user + "' AND password = '" + hash + "'");
		db.transaction( function(tx){ tx.executeSql("COUNT (password) FROM todo_Users WHERE username ='" + user + "' AND password = '" + hash + "'"); }, error);
	}
	*/
	
	//var isEqual = tx.executeSql("COUNT (password) FROM todo_Users WHERE username ='" + user + "' AND password = '" + hash + "'");
	
	//'$6$rounds=1234$56abadac833a5$fQIaUG/da/KqlJc5DzCIym/PL.ZhEdw5VOZsw7mofkm.3aE2rZ/rjDCczymRbj1V3rF6lzJO7DR1WOd2ZnC6O.';

	/*function hash_is_valid(pass, hash) 
	{
	  return hash === crypt(pass, hash);
	}

	console.log(hash_is_valid(pass, hash)); // true or false*/





	//Other attempt
	 
	 /*
	 if(hash_is_valid(form.password.value, hash))
	 {
		alert('hash accepted')
	 }
	 
	 if(form.username.value == "checkserveruserid" && form.password.value == "checkserverpswrd")
	 {
		window.open('index.html') //opens tasks list while Id & password matches
	 }
	 else
	 {
	   alert("Error Password or Username")//displays error message
	 }
	 */
	 
}
//$("#LoginButton").click(check(this.form));

</script>

<title>Login</title>
</head>
<body>

<form action="login_form.asp">
  Username: <input type="text" name="username"><br/><br/>
  Password: <input type="password" name="password"><br/><br/>
  <input type="button" id="LoginButton" value="Login" onclick="check();"/>
  <input type="reset" value="Cancel"/><br/><br/>
  <a href="reg.html">Create a new account</a>
</form>


</body>
</html> 